<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        body{
            background-color: green;
        }
        .msgBox{
            background-color:rgb(255, 108, 108);
            width: 242px;
            /* height: 400px; temporaire */
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }    
        
        .msgBox p{
            background-color: rgb(255, 108, 108);
            padding: 10px 20px;
            color: black;
            float: left;
        }
        .msgBox button{
            background-color: grey;
            position: absolute;
            top: .5rem;
            right: .5rem;
        }
        
    </style>
</head>
<body>
    <!-- On retire la div ici , car on va la generer dynamiquement en javaScript -->
    <!-- <div class="msgBox">
        <p>Message</p>
        <button>X</button>
    </div> -->
    <button id="btnAfficheDialog">je suis une boite de dialogue</button>

    <script>
        /* Si la msgType a la valeur 'warning', alors  l'icone warning sera affichée comme background image du msg, et le panel prendra la couleur d'arriere plan rouge.
         Sinon le msgType a la valeur 'chat', alors l'icone chat sera affichée et le panel prendra la couleur d'arriere plan bleu turquoise.
        Si le parametre msgType n'a pas de valeur du tout, alors, le paragraphe prendra un padding par defaut et il n'y aura ni icone ni couleur d'arriere plan
        1ere etape construisez les if avec les instructions suivantes:
        //Si (le msgType a la valeur de 'warning)
        */

        var btnOpenBox = document.getElementById('btnAfficheDialog');
        function afficheMessage(msgText){

            // dans une variable nommée html on selectionne la balise html dans le DOM
            var body = document.querySelector('body');
            // dans une variable boiteDialogue, on créé un objet div, avec la methode createElement
            var boiteDialogue = document.createElement('div');
            // Ajouter a cette boiteDialogue l'attibut class'msgBox' avec la methode setAttribute('nomde l'attribut' , 'nouvelleValeur')
            // les deux parametres attendus 1- nom de l'attribut: on mettra class || 2- nouvelle valeur: on mettra msgBox
            boiteDialogue.setAttribute('class','msgBox');
            body.appendChild(boiteDialogue);
            // creer une variable pMessage qui créé un objet paragraphe 'p'
            var pMessage = document.createElement('p');
            // ajouter a cet objet pMessage le contenu texte suivant: 'je suis une boite de dialogue' avec la methode textContent
            pMessage.textContent = msgText;
            // et ajoute ce pMessage comme enfant de la boiteDialogue créée tout a l'heure.
            boiteDialogue.appendChild(pMessage);
            // creer une variable closeBtn qui contient un nouvel objet virtuel button, 
            var closeBtn = document.createElement('button');
            // ajouter a cet objet le contenu texte 'X'
            closeBtn.textContent = 'X';
            // donner a l'objet boiteDialogue cet enfant closeBtn
            boiteDialogue.appendChild(closeBtn);
            // pour fermer la boite de dialogue
            closeBtn.addEventListener('click', function(){
                boiteDialogue.parentNode.removeChild(boiteDialogue);
                // au clic sur le bouton de la boite de dialogue, le parent"body, retire son enfant (la boite de dialogue)
            })
        }//fin de la fonction afficheMessage()
        // ajouter a btnOpenBox un eventListener qui au clique declanche la fontion afficheMassage()

        /* ici les parnthese qui suivent declenchant la fonction sans attendre le clic, pour eviter ça, on va faire une 2eme version de cette fonction si dessous*/
        // btnOpenBox.addEventListener('click', afficheMessage('le nouveau texte de la boite'));    
           btnOpenBox.addEventListener('click', function(){ 
               afficheMessage('le nouveau texte de la boite');
            }) 
          /* si nous voulons specifier des parametres  pour la fonction que nous appellons (ici fonction afficheMessage , Alors nous ne pouvons pas l'invoquer directement? nous avons besoin de la mettre a l'interieur d'une fonction anomyme.(elle n'est pas dans la portée immediate et n'est donc pas appelée immediatement.
          Maintenant, elle ne sera pas appellée tant que le bouton n'est pas cliqué.) */   
    </script>
</body>
</html>